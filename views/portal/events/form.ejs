<%- include('../../partials/portal-header', { currentPage: 'events', pageTitle: isEdit ? 'Edit Event' : 'Add Event' }) %>

<div class="page-actions">
  <a href="/portal/events" class="btn btn-outline">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    Back to Events
  </a>
</div>

<div class="form-card">
  <form action="/portal/events<%= isEdit ? '/' + event.EventID : '' %>" method="POST" class="crud-form">
    <div class="form-section">
      <h3>Event Details</h3>
      
      <div class="form-group">
        <label for="title">Event Title <span class="required">*</span></label>
        <input type="text" id="title" name="title" value="<%= event.EventName || '' %>" required>
      </div>
      
      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" name="description" rows="4"><%= event.EventDescription || '' %></textarea>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="event_type">Event Type <span class="required">*</span></label>
          <select id="event_type" name="event_type" required>
            <% eventTypes.forEach(t => { %>
              <option value="<%= t %>" <%= event.EventType === t ? 'selected' : '' %>><%= t %></option>
            <% }) %>
          </select>
        </div>
        <div class="form-group">
          <label for="event_date">Event Date <span class="required">*</span></label>
          <input type="date" id="event_date" name="event_date" value="<%= event.EventDateTimeStart ? new Date(event.EventDateTimeStart).toISOString().split('T')[0] : '' %>" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="start_time">Start Time</label>
          <input type="time" id="start_time" name="start_time" value="<%= event.EventDateTimeStart ? new Date(event.EventDateTimeStart).toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute:'2-digit'}) : '' %>">
        </div>
        <div class="form-group">
          <label for="end_time">End Time</label>
          <input type="time" id="end_time" name="end_time" value="<%= event.EventDateTimeEnd ? new Date(event.EventDateTimeEnd).toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute:'2-digit'}) : '' %>">
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3>Location & Capacity</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="location">Location</label>
          <input type="text" id="location" name="location" value="<%= event.EventLocation || '' %>" placeholder="e.g., UVU Engineering Building">
        </div>
        <div class="form-group">
          <label for="max_participants">Max Participants</label>
          <input type="number" id="max_participants" name="max_participants" value="<%= event.EventCapacity || '' %>" min="1">
        </div>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <%= isEdit ? 'Update Event' : 'Add Event' %>
      </button>
      <a href="/portal/events" class="btn btn-outline">Cancel</a>
    </div>
  </form>
</div>

<%- include('../../partials/portal-footer') %>


