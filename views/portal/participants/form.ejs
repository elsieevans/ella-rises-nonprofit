<%- include('../../partials/portal-header', { currentPage: 'participants', pageTitle: isEdit ? 'Edit Participant' : 'Add Participant' }) %>

<div class="page-actions">
  <a href="/portal/participants" class="btn btn-outline">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    Back to Participants
  </a>
</div>

<div class="form-card">
  <form action="/portal/participants<%= isEdit ? '/' + participant.ParticipantID : '' %>" method="POST" class="crud-form">
    <div class="form-section">
      <h3>Personal Information</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="first_name">First Name <span class="required">*</span></label>
          <input type="text" id="first_name" name="first_name" value="<%= participant.ParticipantFirstName || '' %>" required>
        </div>
        <div class="form-group">
          <label for="last_name">Last Name <span class="required">*</span></label>
          <input type="text" id="last_name" name="last_name" value="<%= participant.ParticipantLastName || '' %>" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="email">Email <span class="required">*</span></label>
          <input type="email" id="email" name="email" value="<%= participant.ParticipantEmail || '' %>" required>
        </div>
        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="tel" id="phone" name="phone" value="<%= participant.ParticipantPhone || '' %>">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="date_of_birth">Date of Birth</label>
          <input type="date" id="date_of_birth" name="date_of_birth" value="<%= participant.ParticipantDOB ? new Date(participant.ParticipantDOB).toISOString().split('T')[0] : '' %>">
        </div>
        <div class="form-group">
          <label for="role">Role</label>
          <select id="role" name="role">
            <option value="participant" <%= (!participant.ParticipantRole || participant.ParticipantRole === 'participant') ? 'selected' : '' %>>Participant</option>
            <option value="admin" <%= participant.ParticipantRole === 'admin' ? 'selected' : '' %>>Admin (Manager)</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3>Address</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="city">City</label>
          <input type="text" id="city" name="city" value="<%= participant.ParticipantCity || '' %>">
        </div>
        <div class="form-group">
          <label for="state">State</label>
          <input type="text" id="state" name="state" value="<%= participant.ParticipantState || '' %>">
        </div>
        <div class="form-group">
          <label for="zip">Zip Code</label>
          <input type="text" id="zip" name="zip" value="<%= participant.ParticipantZip || '' %>">
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3>School & Career</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="school">School</label>
          <input type="text" id="school" name="school" value="<%= participant.ParticipantSchool || '' %>">
        </div>
        <div class="form-group">
          <label for="employer">Employer</label>
          <input type="text" id="employer" name="employer" value="<%= participant.ParticipantEmployer || '' %>">
        </div>
      </div>

      <div class="form-group">
        <label for="field_of_interest">Field of Interest</label>
        <input type="text" id="field_of_interest" name="field_of_interest" value="<%= participant.ParticipantFieldOfInterest || '' %>">
      </div>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <%= isEdit ? 'Update Participant' : 'Add Participant' %>
      </button>
      <a href="/portal/participants" class="btn btn-outline">Cancel</a>
    </div>
  </form>
</div>

<%- include('../../partials/portal-footer') %>
