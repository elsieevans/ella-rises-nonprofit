<%- include('../../partials/portal-header', { currentPage: 'milestones', pageTitle: isEdit ? 'Edit Milestone' : 'Add Milestone' }) %>

<div class="page-actions">
  <a href="/portal/milestones" class="btn btn-outline">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    Back to Milestones
  </a>
</div>

<div class="form-card">
  <form action="/portal/milestones<%= isEdit ? '/' + milestone.id : '' %>" method="POST" class="crud-form">
    <div class="form-section">
      <h3>Milestone Details</h3>
      
      <div class="form-group">
        <label for="name">Milestone Name <span class="required">*</span></label>
        <input type="text" id="name" name="name" value="<%= milestone.name || '' %>" required>
      </div>
      
      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" name="description" rows="3"><%= milestone.description || '' %></textarea>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="category">Category <span class="required">*</span></label>
          <select id="category" name="category" required>
            <% categories.forEach(c => { %>
              <option value="<%= c %>" <%= milestone.category === c ? 'selected' : '' %>><%= c %></option>
            <% }) %>
          </select>
        </div>
        <div class="form-group">
          <label for="points">Points</label>
          <input type="number" id="points" name="points" value="<%= milestone.points || 0 %>" min="0">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="badge_icon">Badge Icon</label>
          <input type="text" id="badge_icon" name="badge_icon" value="<%= milestone.badge_icon || '' %>" placeholder="e.g., star, trophy, code">
        </div>
        <div class="form-group">
          <label for="sort_order">Sort Order</label>
          <input type="number" id="sort_order" name="sort_order" value="<%= milestone.sort_order || 0 %>" min="0">
        </div>
      </div>
      
      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" name="is_active" <%= !isEdit || milestone.is_active ? 'checked' : '' %>>
          <span>Active Milestone</span>
        </label>
      </div>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <%= isEdit ? 'Update Milestone' : 'Add Milestone' %>
      </button>
      <a href="/portal/milestones" class="btn btn-outline">Cancel</a>
    </div>
  </form>
</div>

<%- include('../../partials/portal-footer') %>

