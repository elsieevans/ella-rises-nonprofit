<%- include('../../partials/portal-header', { currentPage: 'donations', pageTitle: 'Donation Details' }) %>

<div class="page-actions">
  <a href="/portal/donations" class="btn btn-outline">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    Back to Donations
  </a>
  <% if (user && user.role === 'Admin') { %>
    <a href="/portal/donations/<%= donation.DonationID %>/edit" class="btn btn-primary">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      Edit
    </a>
  <% } %>
</div>

<div class="detail-grid">
  <!-- Main Info Card -->
  <div class="detail-card">
    <div class="detail-header">
      <div class="detail-avatar">
        <%= donation.ParticipantFirstName ? donation.ParticipantFirstName.charAt(0) : '' %><%= donation.ParticipantLastName ? donation.ParticipantLastName.charAt(0) : '' %>
      </div>
      <div class="detail-title">
        <h2><%= donation.ParticipantFirstName %> <%= donation.ParticipantLastName %></h2>
        <span class="status-badge status-active">
          Donor
        </span>
      </div>
    </div>
    
    <div class="detail-section">
      <h3>Donation Information</h3>
      <dl class="detail-list">
        <dt>Amount</dt>
        <dd><strong>$<%= parseFloat(donation.DonationAmount || 0).toLocaleString() %></strong></dd>
        <dt>Date</dt>
        <dd><%= donation.DonationDate ? new Date(donation.DonationDate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) : 'Not set' %></dd>
        <% if (donation.DonationNo) { %>
        <dt>Donation Number</dt>
        <dd><%= donation.DonationNo %></dd>
        <% } %>
        <% if (donation.TotalDonations) { %>
        <dt>Total Donations</dt>
        <dd>$<%= parseFloat(donation.TotalDonations || 0).toLocaleString() %></dd>
        <% } %>
      </dl>
    </div>

    <div class="detail-section">
      <h3>Donor Contact</h3>
      <dl class="detail-list">
        <dt>Email</dt>
        <dd><%= donation.ParticipantEmail ? '<a href="mailto:' + donation.ParticipantEmail + '">' + donation.ParticipantEmail + '</a>' : '-' %></dd>
      </dl>
    </div>
  </div>
</div>

<%- include('../../partials/portal-footer') %>
